<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.medical.mapper.PayMapperCustom" >
  
  <select id="selectByPayTradeNo" resultType="com.medical.po.Pay" parameterType="String" >
    select *
    
    from pay
    where payTradeNo = #{0}
  </select>
  <select id="selectByLoginIdAndType" resultType="map" parameterType="java.lang.Integer" >
    select a.payid,a.payorderid,a.paytradeno,a.paymodeid,b.paymodename,a.payalipaytradeno,a.paywxtradeno,a.paytotalamount,a.payreceiptamount,
   a.paycreattime,a.payendtime,a.paytypeid,c.paytypename,a.paystateid,d.paystatename,a.payremark,a.paysellername as payreceivername,
   a.paybuyername as paysendername 
    from pay as a
    	left join paymode as b on a.payModeId= b.payModeId
    	left join paytype as c on a.payTypeId =c.payTypeId
    	left join paystate as d on a.payStateId= d.payStateId
    where  
    <if test="param2==1">
    	 (a.payBuyerId=#{0} and a.payTypeId=1) or (a.payBuyerId=#{0} and a.payTypeId=2) or (a.paySellerId=#{0} and a.payTypeId=4) 
    </if>
    <if test="param2==2">
    (a.paySellerId=#{0} and a.payTypeId=1) or (a.paySellerId=#{0} and a.payTypeId=3) or (a.paySellerId=#{0} and a.payTypeId=5) 
    </if>
    <if test="param2==3">
    	 (a.payBuyerId=#{0} and a.payTypeId=3) or (a.paySellerId=#{0} and a.payTypeId=2) or (a.paySellerId=#{0} and a.payTypeId=6)
    </if>
    order by a.payCreatTime desc
  </select>
</mapper>